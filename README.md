# operations

运维的一些常用脚本

# shell运维脚本

1、监控巡检脚本

包含磁盘信息、网卡信息、日志相关的内容、获取操作系统的版本信息、内存信息、系统状态等

2、磁盘监控

实时监控本机内存和硬盘剩余空间，剩余内存小于 500M、根分区剩余空间小于 1000M时，发送报警邮件给 root 管理员

3、监控主机开机的相关信息

将进程在后台运行，不使用前台资源，好处在于第一台没有给回应的时候不需要一直等待，可以进行执行第二台等

4、Nginx日志根据日期进行切割

5、DOS攻击

根据nginx的access.log日志中记录的访问的IP信息，获取到一直在连接并发量高的ip后，添加到防火墙中，禁止该IP继续访问Nginx，从而达到防止被攻击的效果

6、批量创建用户

提供user.info文件，读取后，根据用户名生成响应的系统用于并随机生成密码，然后启用md5加密

# python运维脚本

1、FTP客户端

通过ftplib模块操作ftp服务器，进行上传下载等操作

2、Saltstack客户端

通过 api 对 Saltstack 服务端进行操作，执行命令。

3、SSH客户端

仅适用于通过key连接，如果需要密码连接，需要修改本脚本的内容

4、企业微信告警

通过企业微信应用，进行微信告警，可用于Zabbix监控

5、获取域名的ssl证书过期时间

获取域名的ssl过期时间，用于zabbix告警
